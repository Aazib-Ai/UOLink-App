# Firebase Configuration (Next.js Public Variables)
NEXT_PUBLIC_FIREBASE_API_KEY=your_firebase_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=your_measurement_id


# Timetable Data Endpoint (Server-only)
# Do NOT prefix with NEXT_PUBLIC to avoid exposing the URL to clients
# Example: https://your-protected-json-endpoint.example.com/master_timetable.json
TIMETABLE_ENDPOINT_URL=

# Firebase Admin Service Account (Keep Secret)
FIREBASE_ADMIN_CLIENT_EMAIL=your-service-account-email@your-project-id.iam.gserviceaccount.com
FIREBASE_ADMIN_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nPASTE_YOUR_KEY_CONTENT_HERE\nAND_HERE\n-----END PRIVATE KEY-----\n"



# Cloudflare R2 Storage
CLOUDFLARE_R2_ACCOUNT_ID=your_r2_account_id
CLOUDFLARE_R2_ACCESS_KEY_ID=your_r2_access_key_id
CLOUDFLARE_R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
CLOUDFLARE_R2_BUCKET_NAME=your_public_bucket_name
CLOUDFLARE_R2_PUBLIC_BASE_URL=https://your-public-r2-domain.example.com
NEXT_PUBLIC_R2_PUBLIC_BASE_URL=https://your-public-r2-domain.example.com
# Optional: override the API endpoint (defaults to https://<account-id>.r2.cloudflarestorage.com)
# CLOUDFLARE_R2_ENDPOINT=https://custom.r2.dev

# R2 Signed URLs
R2_SIGNED_URLS_ENABLED=true
R2_SIGNED_URL_TTL_SECONDS=300

# Upload Configuration
MAX_UPLOAD_SIZE_MB=25


# Upstash Redis (Distributed Rate Limiting)
# Refer to https://console.upstash.com/ for your REST URL and token
UPSTASH_REDIS_REST_URL=https://your-upstash-redis-url.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-redis-rest-token

# Rate Limiter Hardening (Development-only controls)
# In production, Redis is required and bypass header is blocked.
RATE_LIMIT_DEV_BYPASS_ENABLED=false
# Comma-separated IPs allowed to use x-rate-limit-bypass header in development
RATE_LIMIT_DEV_WHITELIST_IPS=127.0.0.1,::1

# Security Logging Configuration
# Enable/disable security logging (default: true)
SECURITY_LOGGING_ENABLED=true
# Security event sampling rate (0.01 = 1%, 0.10 = 10%, default: 0.05 = 5%)
SECURITY_EVENT_SAMPLING_RATE=0.05
# Route metrics sampling rate (0.01 = 1%, 0.10 = 10%, default: 0.05 = 5%)
SECURITY_METRICS_SAMPLING_RATE=0.05
# Batch window duration in milliseconds (default: 60000 = 60s)
SECURITY_BATCH_WINDOW_MS=60000
# Maximum batch size before immediate flush (default: 100)
SECURITY_MAX_BATCH_SIZE=100
# Enable immediate writes for critical events (default: true)
SECURITY_CRITICAL_EVENTS_IMMEDIATE=true

SHEET_ID=""
TAB_GIDS='[]'
# Cloudflare R2 credentials
CLOUDFLARE_R2_ACCESS_KEY_ID=""
CLOUDFLARE_R2_SECRET_ACCESS_KEY=""
CLOUDFLARE_R2_ACCOUNT_ID=""
CLOUDFLARE_R2_BUCKET="uolink-prod"
